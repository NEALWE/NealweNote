(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d3fed022","chunk-4cf30e3f"],{"02b6":function(t,e,i){"use strict";var n=i("495e"),o=i.n(n);o.a},"0791":function(t,e,i){},"2f0e":function(t,e,i){},3482:function(t,e,i){},4819:function(t,e,i){},"495e":function(t,e,i){},"4e29":function(t,e,i){"use strict";var n=i("4819"),o=i.n(n);o.a},"542c":function(t,e,i){"use strict";var n=i("0791"),o=i.n(n);o.a},"841e":function(t,e,i){"use strict";var n=i("2f0e"),o=i.n(n);o.a},8634:function(t,e,i){"use strict";var n=i("b375"),o=i.n(n);o.a},"9bf3":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("div",{staticClass:"handle-box"},[i("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"筛选关键词"},model:{value:t.select_word,callback:function(e){t.select_word=e},expression:"select_word"}}),t._v(" "),i("el-button",{attrs:{type:"primary",icon:"search"},on:{click:this.quicksearch}},[t._v("快速搜索")]),t._v(" "),i("el-button",{attrs:{type:"primary",icon:"search"},on:{click:this.backTopPage}},[t._v("返回首页")])],1),t._v(" "),i("el-table",{ref:"multipleTable",staticClass:"table",staticStyle:{"font-weight":"bold"},attrs:{data:t.tableData,border:""},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{prop:"fields.note_id",label:"序号",width:"100%"}}),t._v(" "),i("el-table-column",{attrs:{prop:"fields.add_time",label:"修改时间",formatter:t.sub_time,width:"200%"}}),t._v(" "),i("el-table-column",{attrs:{prop:"fields.note_tree_label",label:"标签"}}),t._v(" "),i("el-table-column",{attrs:{prop:"fields.note_title",label:"标题"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作",align:"center",width:"150%"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",icon:"el-icon-zoom-in"},on:{click:function(i){return t.handleDetails(e.row.fields.note_content)}}},[t._v("查看正文")]),t._v(" "),i("br"),t._v(" "),i("el-button",{attrs:{type:"text",icon:"el-icon-zoom-in"},on:{click:function(i){return t.editNoteContent(e.row.fields.note_id)}}},[t._v("编辑正文")])]}}])})],1),t._v(" "),i("div",{staticClass:"pagination",staticStyle:{"margin-top":"10px"}},[i("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper",total:t.totalCnt,pageSize:7,"current-page":t.cur_page},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.cur_page=e},"update:current-page":function(e){t.cur_page=e}}})],1),t._v(" "),i("el-dialog",{staticStyle:{"margin-top":"10px"},attrs:{title:"帖文详情",visible:t.detailVisible,width:"95%"},on:{"update:visible":function(e){t.detailVisible=e}}},[i("froalaView",{model:{value:t.froalaContent,callback:function(e){t.froalaContent=e},expression:"froalaContent"}})],1),t._v(" "),i("el-dialog",{attrs:{title:"编辑",visible:t.editVisible},on:{"update:visible":function(e){t.editVisible=e}}},[i("el-form",{ref:"form",attrs:{model:t.form}},t._l(t.form,(function(e,n){return i("el-form-item",{attrs:{label:n}},[i("el-input","id"===n?{attrs:{placeholder:t.form[n],disabled:"true"},model:{value:t.form[n],callback:function(e){t.$set(t.form,n,e)},expression:"form[index]"}}:{attrs:{placeholder:t.form[n]},model:{value:t.form[n],callback:function(e){t.$set(t.form,n,e)},expression:"form[index]"}})],1)})),1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.editVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.saveEdit}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"提示",visible:t.delVisible,center:""},on:{"update:visible":function(e){t.delVisible=e}}},[i("div",{staticClass:"del-dialog-cnt"},[t._v("删除不可恢复，是否确定删除？")]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.delVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.deleteRow}},[t._v("确 定")])],1)])],1)])},o=[],a=(i("6b54"),i("386d"),{name:"listbase",data:function(){return{get_note_content_url:"/api/note/get_note_content/",tableData:[],huilv:0,cur_page:1,totalCnt:0,multipleSelection:[],select_cate:"",select_word:"",select_word_2:"",del_list:[],is_search:!1,editVisible:!1,missionEditVisible:!1,delVisible:!1,detailVisible:!1,TaskDetailVisible:!1,userinfoVisible:!1,froalaContent:"",form_advance_search:{title:"",details:"",content_advance:"",province:"",city:"",person_name:"",start_date:"",end_date:"",delivery:""},form:{id:"",keyword:"",remake:"",count:"",last_match:""},form_missionadd:{keywords:"",remark:""},note_content:"",form_user_info:{user:"",regtime:"",salenums:"",totalbuys:"",totalsales:""},idx:-1,viewData:[]}},created:function(){this.getData()},computed:{data:function(){return this.tableData}},methods:{sub_time:function(t){return t.fields.add_time.substring(0,16)},exportToExcel:function(){var t=XLSX.utils.table_to_book(document.getElementById("table-content")),e=XLSX.write(t,{bookType:"xlsx",bookSST:!0,type:"array"});try{FileSaver.saveAs(new Blob([e],{type:"application/octet-stream"}),"trade-publish.xlsx")}catch(i){}return e},onMouseEnter:function(t,e){this.seen=!0},onMouseLeave:function(t,e){this.seen=!1},handleCurrentChange:function(t){this.cur_page=t,this.getData()},getData:function(){var t=this;this.form_advance_search["content"]=this.select_word,this.form_advance_search["page"]=this.cur_page,this.$axios.post(this.get_note_content_url,this.form_advance_search).then((function(e){t.tableData=e.data.data,t.totalCnt=e.data.totalCnt}))},getAdvanceData:function(){var t=this;this.$axios.post(this.url,{content:this.select_word,page:this.cur_page}).then((function(e){t.tableData=e.data.data,t.totalCnt=e.data.totalCnt}))},quicksearch:function(){var t=this;this.cur_page=1,this.form_advance_search={},this.form_advance_search["content"]=this.select_word,this.form_advance_search["page"]=this.cur_page,this.is_search=!0,this.$axios.post(this.get_note_content_url,this.form_advance_search).then((function(e){t.tableData=e.data.data,t.totalCnt=e.data.totalCnt}))},advanceSearch:function(){var t=this;this.cur_page=1,this.select_word="",this.form_advance_search["page"]=this.cur_page,this.form_advance_search["content"]=this.select_word,this.url="/api/darkwebmonitor/get_recent_info/",this.is_search=!0,this.$axios.post(this.url,this.form_advance_search).then((function(e){t.tableData=e.data.data,t.totalCnt=e.data.totalCnt}))},formatter:function(t,e){return t.address},filterTag:function(t,e){return e.tag===t},handleTaskDetail:function(t,e){var i=this;this.idx=t;var n=this.tableData[t];this.url="/api/darkwebmonitor/get_keyword_info/",this.$axios.post(this.url,{keyword:n.fields.keyword}).then((function(t){i.viewData=t.data.data,i.TaskDetailVisible=!0}))},handleEdit:function(t,e){this.idx=t;var i=this.tableData[t];this.form={id:i.pk,keyword:i.fields.keyword,remark:i.fields.remark},this.editVisible=!0},handleDetails:function(t){this.froalaContent=t,this.detailVisible=!0},editNoteContent:function(t){this.$router.push({path:"/note/edit/"+t})},backTopPage:function(){this.$router.push({path:"/note/create"})},handlemission:function(){this.missionEditVisible=!0},missionadd:function(){var t=this;if(!this.form_missionadd.keywords)return this.$message.success("keywords 字段不能为空"),0;this.url="/api/darkwebmonitor/add_darkwebmonitor_task/",this.$axios.post(this.url,{keywords:this.form_missionadd.keywords,remark:this.form_missionadd.remark}).then((function(e){t.$message.success(e.data),setTimeout((function(){t.search()}),1e3)}))},handleDelete:function(t,e){this.idx=t,this.delVisible=!0},deleteRow:function(){var t=this,e=this.tableData.splice(this.idx,1)[0].pk;this.deleteOneRow(e),setTimeout((function(){t.search()}),1e3)},deleteOneRow:function(t){var e=this;this.url="/api/darkwebmonitor/del_darkwebmonitor_task/",this.is_search=!0,this.$axios.post(this.url,{pk:t}).then((function(t){e.delVisible=!1,e.$message.success(t.data)}))},runOneRow:function(t){var e=this;this.url="/api/darkwebmonitor/run_darkwebmonitor_task/",this.is_search=!0,this.$axios.post(this.url,{id:t}).then((function(t){e.delVisible=!1,e.$message.success(t.data)}))},delAll:function(){var t=this,e=this.multipleSelection.length;this.del_list=this.del_list.concat(this.multipleSelection);for(var i=0;i<e;i++){var n=this.multipleSelection[i].pk;this.deleteOneRow(n)}setTimeout((function(){t.search()}),1e3)},runAll:function(){var t=this,e=this.multipleSelection.length;this.del_list=this.del_list.concat(this.multipleSelection);for(var i=0;i<e;i++){var n=this.multipleSelection[i].pk;this.runOneRow(n)}setTimeout((function(){t.search()}),1e3)},handleSelectionChange:function(t){this.multipleSelection=t},saveEdit:function(){var t=this;this.url="/api/darkwebmonitor/update_darkwebmonitor_task/",this.$axios.post(this.url,this.form).then((function(e){t.$message.success(e.data),e.data.indexOf("成功")&&(t.editVisible=!1)})),setTimeout((function(){t.search()}),1e3)},datetimeToString:function(t){return t=t.year.toString()+"-"+t.month.toString()+"-"+t.day.toString(),t},gettotalCnt:function(){var t=this;this.url="/api/darkwebmonitor/count_darkwebmonitor_task/",this.is_search=!0,this.$axios.post(this.url,{content:this.select_word,page:this.cur_page}).then((function(e){t.totalCnt=e.data.totalCnt}))}}}),s=a,l=(i("542c"),i("b580"),i("2877")),r=Object(l["a"])(s,n,o,!1,null,"62fce6f8",null);e["default"]=r.exports},"9ce3":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("article-detail",{attrs:{"is-edit":!1}})},o=[],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[!1===this.isEdit?[i("keep-alive",[i("CustomTree")],1)]:t._e(),t._v(" "),!1===this.isEdit?[i("keep-alive",[i("listbase")],1)]:[i("keep-alive",[i("CustomFroala",{attrs:{editCheckId:t.editCheckId}})],1)],t._v(" "),i("el-tooltip",{attrs:{placement:"top",content:"返回顶部"}},[i("back-to-top",{attrs:{"custom-style":t.myBackToTopStyle,"visibility-height":0,"back-position":50,"transition-name":"fade_back_to_top"}})],1)],2)},s=[],l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("div",{staticStyle:{width:"100%",display:"flex","align-items":"center","justify-content":"center","margin-bottom":"2%"}},[i("el-button",{staticStyle:{float:"left"},attrs:{icon:"el-icon-plus",type:"primary"},on:{click:t.addRootNode}},[t._v("新增根节点")]),t._v(" "),i("el-button",{staticStyle:{float:"left"},attrs:{icon:"el-icon-tickets",type:"primary"},on:{click:t.saveTree}},[t._v("保存所有节点")]),t._v(" "),i("el-button",{staticStyle:{float:"left"},attrs:{icon:t.expandIcon,type:"primary"},on:{click:t.changeisExpand}},[t._v("全部展开/折叠")]),t._v(" "),i("el-button",{staticStyle:{float:"left"},attrs:{icon:"el-icon-refresh",type:"primary"},on:{click:t.freshTree}},[t._v("刷新树")])],1),t._v(" "),i("div",{staticClass:"tree"},[i("el-tree",{ref:"tree",attrs:{data:this.treeData,props:t.defaultProps,"show-checkbox":"","node-key":"id","check-strictly":!0,"highlight-current":!0,"default-expand-all":t.isExpand,"expand-on-click-node":!1,draggable:""},on:{"node-drag-start":t.handleDragStart,"node-drag-enter":t.handleDragEnter,"node-drag-leave":t.handleDragLeave,"node-drag-over":t.handleDragOver,"node-drag-end":this.handleDragEnd,"node-drop":t.handleDrop,"check-change":t.checkChange,"node-click":this.nodeClick,"node-dblclick":this.nodedbClick},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.node,o=e.data;return i("div",{staticStyle:{width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center"},on:{dblclick:function(){return t.NodeEdit(o)}}},[i("div",{staticStyle:{"flex-grow":"4","flex-basis":"0%",display:"flex","justify-content":"start","margin-right":"20px"}},[i("span",[i("span",[i("span",{directives:[{name:"show",rawName:"v-show",value:!o.is_edit,expression:"!data.is_edit"}]},[i("span",[t._v("\n                  "+t._s(o.label)+"\n                ")])]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:o.is_edit,expression:"data.is_edit"}]},[i("el-input",{ref:"slotTreeInput"+o.id,staticClass:"slot-t-input",staticStyle:{width:"600px"},attrs:{autofocus:"",size:"medium",placeholder:o.label},on:{blur:function(e){return e.stopPropagation(),t.NodeBlur(n,o)}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.NodeBlur(n,o)}},model:{value:o.label,callback:function(e){t.$set(o,"label",e)},expression:"data.label"}})],1)])])]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus",circle:""},on:{click:function(){return t.append_node_action(o)}}}),t._v(" "),i("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-minus",circle:""},on:{click:function(){return t.remove_node_action(n,o)}}}),t._v(" "),i("el-button",{attrs:{icon:"el-icon-search",size:"mini",type:"success",circle:""},on:{click:function(){return t.show_note_content(o)}}}),t._v(" "),i("el-button",{attrs:{icon:"el-icon-edit",size:"mini",type:"success",circle:""},on:{click:function(){return t.editNote(n.data)}}})],1)}}])})],1),t._v(" "),i("el-dialog",{attrs:{title:"编辑子节点名称",visible:t.edit_show},on:{"update:visible":function(e){t.edit_show=e}}},[i("el-row",{staticStyle:{"margin-bottom":"20px"}},[i("el-col",[i("el-input",{attrs:{placeholder:"Please input content"},model:{value:t.node_label,callback:function(e){t.node_label=e},expression:"node_label"}})],1)],1),t._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:function(e){return e.stopPropagation(),t.edit_show_sure(e)}}},[t._v("确定")]),t._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:function(e){return e.stopPropagation(),t.edit_show_cancel(e)}}},[t._v("取消")])],1),t._v(" "),i("el-dialog",{attrs:{title:"确认删除吗？",visible:t.remove_show},on:{"update:visible":function(e){t.remove_show=e}}},[i("el-button",{attrs:{size:"mini"},on:{click:function(e){return e.stopPropagation(),t.remove_show_sure(e)}}},[t._v("确定")]),t._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:function(e){return e.stopPropagation(),t.remove_show_cancel(e)}}},[t._v("取消")])],1),t._v(" "),i("el-dialog",{attrs:{title:"笔记详情",visible:t.detailVisible,top:"2%",width:"95%"},on:{"update:visible":function(e){t.detailVisible=e}}},[i("froalaView",{model:{value:t.froalaContent,callback:function(e){t.froalaContent=e},expression:"froalaContent"}})],1)],1)},r=[],c=(i("20d6"),i("081c")),d=i("b8c9"),u={components:{ElColorAlphaSlider:d["a"],ElAlert:c["a"]},name:"CustomTree",data:function(){return{isExpand:!1,expandIcon:"el-icon-caret-right",treeData:this.getData(),is_edit:!1,max_id:0,new_label_id:0,remove_id:0,remove_node:"",remove_data:"",remove_show:!1,defaultProps:{children:"children",label:"label"},edit_show:!1,add_show:!1,detailVisible:!1,node_label:"",node_id:0,root_content:"",editCheckId:"",froalaContent:""}},mounted:function(){this.$refs.tree.setCheckedKeys([1])},methods:{show_note_content:function(t){var e=this;this.url="/api/note/get_note_content_by_id/",this.$axios.post(this.url,{note_id:t.id}).then((function(t){e.froalaContent=t.data})),this.detailVisible=!0},NodeChangeSure:function(t){this.deal_tree(this.treeData,t.id,t.label),this.saveTree(),this.updateLabel(t.id,t.label)},NodeBlur:function(t,e){var i=this;e.is_edit&&(this.$set(e,"is_edit",!1),this.NodeChangeSure(e)),this.$nextTick((function(){i.$refs["slotTreeInput"+e.id].$refs.input.focus()}))},NodeEdit:function(t){console.log(t.id),t.is_edit?(this.$set(t,"is_edit",!1),this.NodeChangeSure(t)):this.$set(t,"is_edit",!0)},filterNode:function(t,e){return!t||-1!==e.label.indexOf(t)},getData:function(){var t=this;this.url="/api/note/getTree/",this.$axios.post(this.url,{username:"nealwe"}).then((function(e){t.treeData=e.data["tree_content"]}))},getMaxId:function(t){for(var e in t)t[e].id>this.max_id&&(this.max_id=t[e].id),this.getMaxId(t[e].children);return 0},addRootNode:function(){this.add_show=!0},saveTree:function(){this.url="/api/note/saveTree/",this.$axios.post(this.url,{tree_content:this.treeData,username:"nealwe"}).then((function(t){}))},changeisExpand:function(){!0===this.isExpand?(this.isExpand=!1,this.expandIcon="el-icon-caret-right"):(this.isExpand=!0,this.expandIcon="el-icon-caret-bottom");for(var t=0;t<this.$refs.tree.store._getAllNodes().length;t++)this.$refs.tree.store._getAllNodes()[t].expanded=this.isExpand},freshTree:function(){var t=this;this.url="/api/note/getTree/",this.$axios.post(this.url,{username:"nealwe"}).then((function(e){console.log(e.data),t.treeData=e.data["tree_content"]}))},addNodeSubmit:function(t,e){var i=this;this.url="/api/note/saveNodeContent/",this.$axios.post(this.url,{note_tree_label:e,note_title:"",note_content:"",note_id:t}).then((function(t){i.$message.success(t.data)}))},addRootNodeSure:function(){this.getMaxId(this.treeData),this.max_id=this.max_id+1;var t={id:this.max_id++,label:this.root_content,children:[],is_edit:!1};this.treeData.push(t),this.add_show=!1,this.addNodeSubmit(t.id,t.label),this.saveTree()},addRootNodeCancel:function(){this.add_show=!1},append_node_action:function(t){var e=this,i="testtest";this.url="/api/note/add_label/",this.$axios.post(this.url,{note_tree_label:i}).then((function(n){if(e.new_label_id=n.data,"error"!==e.new_label_id&&e.new_label_id>0){console.log(e.new_label_id);var o={id:e.new_label_id,label:i,children:[],is_edit:!1};t.children||e.$set(t,"children",[]),t.children.push(o),e.saveTree()}else e.$message.error("addLabel error")}))},remove_node_action:function(t,e){this.remove_node=t,this.remove_data=e,this.remove_id=t.data.id,this.remove_show=!0},remove_show_cancel:function(t){this.remove_show=!1},remove_node_by_data:function(t){var e=this;for(var i in this.url="/api/note/del_note/",this.$axios.post(this.url,{note_id:t.id}).then((function(t){e.$message({message:t.data,type:"success",showClose:!0,duration:2e3})})),t.children)this.remove_node_by_data(t.children[i])},remove_show_sure:function(){var t=this.remove_node,e=this.remove_data,i=t.parent,n=i.data.children||i.data,o=n.findIndex((function(t){return t.id===e.id}));this.remove_node_by_data(e),n.splice(o,1),this.remove_show=!1,this.saveTree()},editNote:function(t){this.node_id=t.id,this.$router.push({path:"/note/edit/"+this.node_id})},edit:function(t,e){this.node_id=t.data.id,this.node_label=t.data.label,this.edit_show=!0},edit_show_cancel:function(){this.edit_show=!1},edit_show_sure:function(){var t=this.treeData;this.deal_tree(t),this.saveTree(),this.edit_show=!1,this.updateLabel(this.node_id,this.node_label)},deal_tree:function(t,e,i){for(var n in t){if(t[n].id===e){t[n].label=i;break}this.deal_tree(t[n].children,e,i)}},handleDragStart:function(t,e){console.log("drag start")},handleDragEnter:function(t,e,i){console.log("tree drag enter: ",e.label)},handleDragLeave:function(t,e,i){console.log("tree drag leave: ",e.label)},handleDragOver:function(t,e,i){console.log("tree drag over: ",e.label)},handleDragEnd:function(t,e,i,n){console.log("tree drag end: ",e&&e.label,i),this.saveTree()},handleDrop:function(t,e,i,n){console.log("tree drop: ",e.label,i)},checkChange:function(t,e,i){1==e?(this.editCheckId=t.id,this.$refs.tree.setCheckedKeys([t.id])):this.editCheckId==t.id&&this.$refs.tree.setCheckedKeys([t.id])},nodeClick:function(t,e,i){this.editCheckId=t.id,this.$refs.tree.setCheckedKeys([t.id])},nodedbClick:function(t,e,i){this.editCheckId=t.id,this.$refs.tree.setCheckedKeys([t.id]),this.NodeEdit(e.data)},addLabel:function(t){var e=this;this.url="/api/note/add_label/",this.$axios.post(this.url,{note_tree_label:t}).then((function(t){e.new_label_id=t.data}))},updateTree:function(){var t=this;this.url="/api/note/updateTree/",this.$axios.post(this.url,{tree_content:this.treeData,username:"nealwe"}).then((function(e){t.$message.success(e.data)}))},updateLabel:function(t,e){var i=this;this.url="/api/note/update_label/",this.$axios.post(this.url,{note_id:t,note_tree_label:e}).then((function(t){i.$message.success(t.data)}))}}},h=u,f=(i("bbd1"),i("841e"),i("2877")),p=Object(f["a"])(h,l,r,!1,null,"69778c64",null),m=p.exports,_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-form",{ref:"postForm",staticClass:"form-container",attrs:{model:t.postForm,rules:t.rules}},[i("div",{staticStyle:{"margin-left":"5%","margin-right":"5%"}},[i("el-row",[i("el-form-item",{staticStyle:{"margin-bottom":"20px"},attrs:{prop:"title"}},[i("MDinput",{attrs:{maxlength:100,name:"name",required:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}},[t._v("\n            "+t._s("标签为："+this.label)+"\n          ")])],1),t._v(" "),i("div",{staticStyle:{"margin-bottom":"20px"}},[i("froala",{attrs:{id:"edit",config:this.froalaConfig},model:{value:t.froalaContent,callback:function(e){t.froalaContent=e},expression:"froalaContent"}})],1),t._v(" "),i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"margin-bottom":"20px"},attrs:{type:"success"},on:{click:t.submitForm}},[t._v("\n          Publish\n        ")])],1)],1)]),t._v(" "),i("el-tooltip",{attrs:{placement:"top",content:"返回顶部"}},[i("back-to-top",{attrs:{"custom-style":t.myBackToTopStyle,"visibility-height":0,"back-position":50,"transition-name":"fade"}})],1)],1)},b=[],v=(i("7f7f"),i("f419")),g=i.n(v),k=i("8256"),y=i("70a2"),w=i("1aba"),x=i("b804"),C=i("61f7"),$=i("2423"),S=i("828d"),T=i("62f2"),D=i("4482"),E=i("b1fc"),V=i.n(E),I=i("2c65"),N=i("0625");V.a.DefineIcon("alert",{NAME:"info",SVG_KEY:"help"}),V.a.RegisterCommand("alert",{title:"Hello",focus:!1,undo:!1,refreshAfterCallback:!1,callback:function(){alert("Hello!")}});var F={status:"draft",title:"",content:"",content_short:"",source_uri:"",image_uri:"",display_time:void 0,id:void 0,platforms:["a-platform"],comment_disabled:!1,importance:0},O={name:"CustomFroala",components:{Tinymce:k["a"],MDinput:w["a"],Upload:y["a"],Sticky:x["a"],Warning:T["a"],CommentDropdown:D["a"],PlatformDropdown:D["b"],SourceUrlDropdown:D["c"],ElDragSelect:I["a"],tree:g.a,BackToTop:N["a"]},props:{editCheckId:{default:0}},data:function(){var t=this,e=function(e,i,n){""===i?(t.$message({message:e.field+"为必传项",type:"error"}),n(new Error(e.field+"为必传项"))):n()},i=function(e,i,n){i?Object(C["d"])(i)?n():(t.$message({message:"外链url填写不正确",type:"error"}),n(new Error("外链url填写不正确"))):n()};return{SubmitButtonStyle:{right:"1.5%",bottom:"1000px",width:"40px",height:"40px","border-radius":"4px","line-height":"45px",background:"#e7eaf1"},timer:null,article:"",fullscreenLoading:!1,value:["Apple","Banana","Orange"],options:[{value:"Apple",label:"Apple"},{value:"Banana",label:"Banana"},{value:"Orange",label:"Orange"},{value:"Pear",label:"Pear"},{value:"Strawberry",label:"Strawberry"}],postForm:Object.assign({},F),loading:!1,userListOptions:[],rules:{image_uri:[{validator:e}],source_uri:[{validator:i,trigger:"blur"}]},tempRoute:{},froalaConfig:{toolbarButtons:{moreText:{buttons:["bold","italic","underline","fontSize","textColor","backgroundColor","strikeThrough","subscript","superscript","fontFamily","inlineClass","inlineStyle","clearFormatting"],buttonsVisible:6},moreParagraph:{buttons:["formatOL","formatUL","alignJustify","paragraphStyle","alignLeft","alignCenter","alignRight","lineHeight","outdent","indent","quote"],buttonsVisible:6},moreRich:{buttons:["insertLink","insertImage","insertVideo","insertTable","emoticons","fontAwesome","specialCharacters","embedly","insertFile","insertHR"],buttonsVisible:2},moreMisc:{buttons:["undo","redo","fullscreen","print","getPDF","spellChecker","selectAll","html","help"],buttonsVisible:3}},placeholderText:"Start typing something...",heightMin:"900",language:"zh_cn",imageUploadURL:"/api/note/upload/",fileUploadURL:"/api/note/upload/",quickInsertEnabled:!1,toolbarVisibleWithoutSelection:!0,disableRightClick:!0,colorsHEXInput:!1,toolbarSticky:!0,zIndex:2,events:{"froalaEditor.initialized":function(){console.log("initialized")}}},title:"",label:"",froalaContent:""}},computed:{contentShortLength:function(){return this.postForm.content_short.length},displayTime:{get:function(){return+new Date(this.postForm.display_time)},set:function(t){this.postForm.display_time=new Date(t)}}},created:function(){this.get_title(),this.get_label(),this.get_note_content(),this.tempRoute=Object.assign({},this.$route),this.setTagsViewTitle()},methods:{downloadPDF:function(){var t=this;this.fullscreenLoading=!0,setTimeout((function(){t.fullscreenLoading=!1,t.$nextTick((function(){window.print()}))}),3e3)},get_title:function(){var t=this;this.url="/api/note/get_title/",this.$axios.post(this.url,{note_id:this.editCheckId}).then((function(e){t.title=e.data}))},get_label:function(){var t=this;this.url="/api/note/get_label/",this.$axios.post(this.url,{note_id:this.editCheckId}).then((function(e){t.label=e.data}))},get_note_content:function(){var t=this;this.url="/api/note/get_note_content_by_id/",this.$axios.post(this.url,{note_id:this.editCheckId}).then((function(e){""===e.data?t.froalaContent="-":t.froalaContent=e.data}))},nodeClick:function(t){console.log(JSON.parse(JSON.stringify(t)))},contextmenuClick:function(t){console.log(t),console.log("触发了自定义的contextmenuClick事件")},expandClick:function(t){console.log(JSON.parse(JSON.stringify(t))),t.isExpand&&t.hasOwnProperty("children")&&(t.loadNode=1,setTimeout((function(){t.loadNode=2,t.isFolder=!t.isFolder,t.children.push({id:+new Date,name:"动态加载节点1",path:"",clickNode:!1,isFolder:!1,isExpand:!1,loadNode:0,children:[{id:+new Date+1,name:"动态加载末节点",path:"",clickNode:!1,isExpand:!1,isFolder:!1,loadNode:0}]})}),1e3))},fetchData:function(t){var e=this;Object($["a"])(t).then((function(t){e.postForm=t.data,e.postForm.title+="   Article Id:".concat(e.postForm.id),e.postForm.content_short+="   Article Id:".concat(e.postForm.id),e.setTagsViewTitle(),e.setPageTitle()})).catch((function(t){console.log(t)}))},setTagsViewTitle:function(){console.log(this.editCheckId);var t="Edit Article",e="EditArticle",i=Object.assign({},this.tempRoute,{title:"".concat(t,"-").concat(this.editCheckId),name:"".concat(e,"-").concat(this.editCheckId)});console.log(this.$route),this.$store.dispatch("tagsView/updateVisitedView",i)},setPageTitle:function(){var t="Edit Article";document.title="".concat(t," - ").concat(this.postForm.id)},submitForm:function(){var t=this;this.url="/api/note/saveNodeContent/",""!==this.froalaContent?this.$axios.post(this.url,{note_tree_label:this.label,note_title:this.title,note_content:this.froalaContent,note_id:this.editCheckId}).then((function(e){t.$notify({title:"成功",message:"发布文章成功",type:"success",duration:2e3})})):this.$notify({title:"失败",message:"文章内容不得为空，请刷新重试！",type:"warning",duration:2e3})},draftForm:function(){0!==this.postForm.content.length&&0!==this.postForm.title.length?(this.$message({message:"保存成功",type:"success",showClose:!0,duration:1e3}),this.postForm.status="draft"):this.$message({message:"请填写必要的标题和内容",type:"warning"})},getRemoteUserList:function(t){var e=this;Object(S["a"])(t).then((function(t){t.data.items&&(e.userListOptions=t.data.items.map((function(t){return t.name})))}))},autoUpdate:function(){var t=this;this.timer=setInterval((function(){t.url="/api/note/saveNodeContent/",""!==t.froalaContent?t.$axios.post(t.url,{note_tree_label:t.label,note_title:t.title,note_content:t.froalaContent,note_id:t.editCheckId}).then((function(t){})):(console.log(t.froalaContent),t.$notify({title:"自动更新失败",message:"文章内容不得为空，请刷新重试！",type:"warning",duration:2e3}))}),1e3)}},beforeRouteEnter:function(t,e,i){console.log("enter"),i()},beforeRouteLeave:function(t,e,i){console.log("leave"),console.log("submitForm()"),this.submitForm(),i()},destroyed:function(){console.log("destroyed start"),console.log("destroyed end")}},P=O,B=(i("8634"),i("d1e4"),Object(f["a"])(P,_,b,!1,null,"0e0006de",null)),L=B.exports,R=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"moveBtn",staticClass:"back-home",on:{click:t.button_click,mousedown:t.down,touchstart:t.down,mousemove:t.move,touchmove:t.move,mouseup:t.end,touchend:t.end,touchcancel:t.end}},[i("el-button",{attrs:{icon:"el-icon-search",circle:""}})],1)},A=[],z=(i("3846"),{name:"CustomFloatButton",props:{editCheckId:{type:String,default:function(){return"test"}}},data:function(){return{flags:!1,position:{x:0,y:0},nx:"",ny:"",dx:"",dy:"",xPum:"",yPum:"",isShow:!1,moveBtn:{}}},mounted:function(){this.moveBtn=this.$refs.moveBtn},methods:{button_click:function(){console.log("/example/edit/"+this.editCheckId),this.$router.push({path:"/example/edit/"+this.editCheckId})},down:function(){var t;this.flags=!0,t=event.touches?event.touches[0]:event,this.position.x=t.clientX,this.position.y=t.clientY,this.dx=this.moveBtn.offsetLeft,this.dy=this.moveBtn.offsetTop},move:function(){if(this.flags){var t;t=event.touches?event.touches[0]:event,this.nx=t.clientX-this.position.x,this.ny=t.clientY-this.position.y,this.xPum=this.dx+this.nx,this.yPum=this.dy+this.ny;var e=document.documentElement.clientWidth,i=document.documentElement.clientHeight;this.xPum>0&&this.xPum<e-this.moveBtn.offsetWidth&&(this.moveBtn.style.left=this.xPum+"px"),this.yPum>0&&this.yPum<i-this.moveBtn.offsetHeight&&(this.moveBtn.style.top=this.yPum+"px"),document.addEventListener("touchmove",this.handler,{passive:!1})}},end:function(){this.flags=!1,document.addEventListener("touchmove",this.handler,{passive:!1})},handler:function(t){if(!this.flags)return!0;event.preventDefault()}}}),j=z,M=(i("02b6"),Object(f["a"])(j,R,A,!1,null,"63943e83",null)),U=M.exports,H=i("9bf3"),J={name:"App1",components:{CustomTree:m,CustomFroala:L,CustomFloatButton:U,listbase:H["default"],BackToTop:N["a"]},props:{isEdit:{type:Boolean,default:!1}},data:function(){return{editCheckId:"123",test_msg:"123",myBackToTopStyle:{right:"1.5%",bottom:"50px",width:"40px",height:"40px","border-radius":"4px","line-height":"45px",background:"#e7eaf1"}}},created:function(){this.isEdit&&(this.editCheckId=this.$route.params&&this.$route.params.id)},methods:{button_click:function(){this.$message.success("成功123")},addFather:function(){}}},X=J,K=(i("4e29"),Object(f["a"])(X,a,s,!1,null,"0cee10e4",null)),q=K.exports,W={name:"CreateArticle",components:{ArticleDetail:q}},Y=W,G=Object(f["a"])(Y,n,o,!1,null,null,null);e["default"]=G.exports},a46b:function(t,e,i){},b375:function(t,e,i){},b580:function(t,e,i){"use strict";var n=i("3482"),o=i.n(n);o.a},bbd1:function(t,e,i){"use strict";var n=i("f83d"),o=i.n(n);o.a},d1e4:function(t,e,i){"use strict";var n=i("a46b"),o=i.n(n);o.a},f83d:function(t,e,i){}}]);